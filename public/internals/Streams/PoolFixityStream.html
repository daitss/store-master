<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Streams::PoolFixityStream
  
    &mdash; Storage Master Service
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (P)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../Streams.html" title="Streams (module)">Streams</a></span></span>
     &raquo; 
    <span class="title">PoolFixityStream</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Streams::PoolFixityStream
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">DataFileStream</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">DataFileStream</li>
          
            <li class="next">Streams::PoolFixityStream</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">/Users/fischer/WorkProjects/daitss2/storage-master/lib/storage-master/fixity/pool-stream.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>PoolFixityStream</p>

<p>Return a stream of all of the fixity data from one pool by querying thes
ilo pool server. The inherited each method yields two values, the package
names (ordered alphabetically, as the parent stream class requires) and a
struct describing those resources:</p>

<pre class="code"><span class='EO05UJJHZ_HPDFHG constant id'>EO05UJJHZ_HPDFHG</span><span class='integer val'>.001</span> <span class='comment val'>#&lt;struct Struct::PoolFixityRecord </span>
                              <span class='location identifier id'>location</span><span class='assign token'>=</span><span class='string val'>&quot;http://silos.ripple.fcla.edu:70/001/data/EO05UJJHZ_HPDFHG.001&quot;</span><span class='comma token'>,</span>
                              <span class='sha1 identifier id'>sha1</span><span class='assign token'>=</span><span class='string val'>&quot;4abc7ec5f02b946dc4812f0b60bda34940ae62f3&quot;</span><span class='comma token'>,</span>
                              <span class='md5 identifier id'>md5</span><span class='assign token'>=</span><span class='string val'>&quot;0d736ef6585b44bf0552a61b95ad9b87&quot;</span><span class='comma token'>,</span>
                              <span class='size identifier id'>size</span><span class='assign token'>=</span><span class='string val'>&quot;1313843200&quot;</span><span class='comma token'>,</span> 
                              <span class='fixity_time identifier id'>fixity_time</span><span class='assign token'>=</span><span class='string val'>&quot;2011-04-27T11:38:30Z&quot;</span><span class='comma token'>,</span>
                              <span class='put_time identifier id'>put_time</span><span class='assign token'>=</span><span class='string val'>&quot;2011-04-20T20:21:33Z&quot;</span><span class='comma token'>,</span> 
                              <span class='status identifier id'>status</span><span class='assign token'>=</span><span class='string val'>&quot;ok&quot;</span><span class='gt op'>&gt;</span>

<span class='EQ93PZGKM_ER3H8G constant id'>EQ93PZGKM_ER3H8G</span><span class='integer val'>.000</span> <span class='comment val'>#&lt;struct Struct::PoolFixityRecord</span>
                              <span class='location identifier id'>location</span><span class='assign token'>=</span><span class='string val'>&quot;http://silos.ripple.fcla.edu:70/001/data/EQ93PZGKM_ER3H8G.000&quot;</span><span class='comma token'>,</span>
                              <span class='sha1 identifier id'>sha1</span><span class='assign token'>=</span><span class='string val'>&quot;a6ec8b7415e1a4fdfacbd42d1a7c0e3435ea2dd4&quot;</span><span class='comma token'>,</span>
                              <span class='md5 identifier id'>md5</span><span class='assign token'>=</span><span class='string val'>&quot;c9672d29178ee51eafef97a4b8297a5b&quot;</span><span class='comma token'>,</span>
                              <span class='size identifier id'>size</span><span class='assign token'>=</span><span class='string val'>&quot;587591680&quot;</span><span class='comma token'>,</span>
                              <span class='fixity_time identifier id'>fixity_time</span><span class='assign token'>=</span><span class='string val'>&quot;2011-04-27T11:38:45Z&quot;</span><span class='comma token'>,</span>
                              <span class='put_time identifier id'>put_time</span><span class='assign token'>=</span><span class='string val'>&quot;2011-04-20T22:08:41Z&quot;</span><span class='comma token'>,</span>
                              <span class='status identifier id'>status</span><span class='assign token'>=</span><span class='string val'>&quot;ok&quot;</span><span class='gt op'>&gt;</span>
</pre>

<p>In the interest of speed the location and timestamp fields are simple
strings (not URI or DateTime as you might expect). Both timestamps are
always returned in UTC “Z” format so it can be simply compared as a
string to other timestamps without worrying about zone conversions.</p>


  </div>
</div>
<div class="tags">
  

</div>

  
  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#url-instance_method" title="#url (instance method)">- (Object) <strong>url</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute url.</p>
</div></span>
  
</li>

    
  </ul>



  

  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (PoolFixityStream) <strong>initialize</strong>(pool, options = {}) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The optional stored_before must produce a valid datetime when it’s
‘to_s’ method is called TODO: the stored_before query parameter is a
bad way of doing things - need to be more HATEOS-driven.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#read-instance_method" title="#read (instance method)">- (Object) <strong>read</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The CSV data returned by the above HTTP request is of the form:.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rewind-instance_method" title="#rewind (instance method)">- (Object) <strong>rewind</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_s-instance_method" title="#to_s (instance method)">- (Object) <strong>to_s</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Streams::PoolFixityStream (class)">PoolFixityStream</a></span></tt>) <strong>initialize</strong>(pool, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>The optional stored_before must produce a valid datetime when it’s
‘to_s’ method is called TODO: the stored_before query parameter is a
bad way of doing things - need to be more HATEOS-driven.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


57</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/storage-master/lib/storage-master/fixity/pool-stream.rb', line 57</span>

<span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span> <span class='pool identifier id'>pool</span><span class='comma token'>,</span> <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
</pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <span id="url-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="url-instance_method">
  
    - (<tt>Object</tt>) <strong>url</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute url</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


52
53
54</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/storage-master/lib/storage-master/fixity/pool-stream.rb', line 52</span>

<span class='def def kw'>def</span> <span class='url identifier id'>url</span>
  <span class='@url ivar id'>@url</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="read-instance_method">
  
    - (<tt>Object</tt>) <strong>read</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>The CSV data returned by the above HTTP request is of the form:</p>

<pre class="code"> <span class='string val'>&quot;name&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;location&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;sha1&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;md5&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;size&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;fixity_time&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;put_time&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;status&quot;</span>
 <span class='string val'>&quot;E20110420_OOJGPX.000&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;http://silos.ripple.fcla.edu:70/004/data/E20110420_OOJGPX.000&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;a5ffd229992586461450851d434e3ce51debb626&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;15e4aeae105dc0cfc8edb2dd4c79454e&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;8192&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;2011-04-27T11:36:03Z&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;2011-04-20T17:25:58Z&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;ok&quot;</span>
 <span class='string val'>&quot;E20110420_OOKCET.000&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;http://silos.ripple.fcla.edu:70/004/data/E20110420_OOKCET.000&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;a5ffd229992586461450851d434e3ce51debb626&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;15e4aeae105dc0cfc8edb2dd4c79454e&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;8192&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;2011-04-27T11:36:03Z&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;2011-04-20T17:26:02Z&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;ok&quot;</span>
 <span class='string val'>&quot;E20110420_OOKUHK.000&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;http://silos.ripple.fcla.edu:70/004/data/E20110420_OOKUHK.000&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;a5ffd229992586461450851d434e3ce51debb626&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;15e4aeae105dc0cfc8edb2dd4c79454e&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;8192&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;2011-04-27T11:36:04Z&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;2011-04-20T17:26:06Z&quot;</span><span class='comma token'>,</span><span class='string val'>&quot;ok&quot;</span>
<span class='dot3 op'>...</span>
</pre>

<p>key = name;  value = [ location, sha1, md5, date, status ]</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


107
108
109
110</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/storage-master/lib/storage-master/fixity/pool-stream.rb', line 107</span>

<span class='def def kw'>def</span> <span class='read identifier id'>read</span>
  <span class='rec identifier id'>rec</span> <span class='assign token'>=</span> <span class='CSV constant id'>CSV</span><span class='dot token'>.</span><span class='parse_line identifier id'>parse_line</span><span class='lparen token'>(</span><span class='@io ivar id'>@io</span><span class='dot token'>.</span><span class='gets identifier id'>gets</span><span class='rparen token'>)</span>
  <span class='return return kw'>return</span> <span class='rec identifier id'>rec</span><span class='dot token'>.</span><span class='shift identifier id'>shift</span><span class='comma token'>,</span> <span class='Struct constant id'>Struct</span><span class='colon2 op'>::</span><span class='PoolFixityRecord constant id'>PoolFixityRecord</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='rec identifier id'>rec</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="rewind-instance_method">
  
    - (<tt>Object</tt>) <strong>rewind</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


87
88
89
90
91</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/storage-master/lib/storage-master/fixity/pool-stream.rb', line 87</span>

<span class='def def kw'>def</span> <span class='rewind identifier id'>rewind</span>
  <span class='super super kw'>super</span>
  <span class='@io ivar id'>@io</span><span class='dot token'>.</span><span class='gets identifier id'>gets</span>   <span class='comment val'># remove initial CSV title &quot;name&quot;,&quot;location&quot;,&quot;sha1&quot;,&quot;md5&quot;,&quot;size&quot;,&quot;fixity_time&quot;,&quot;put_time&quot;,&quot;status&quot;</span>
  <span class='self self kw'>self</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="to_s-instance_method">
  
    - (<tt>Object</tt>) <strong>to_s</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


94
95
96</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/fischer/WorkProjects/daitss2/storage-master/lib/storage-master/fixity/pool-stream.rb', line 94</span>

<span class='def def kw'>def</span> <span class='to_s identifier id'>to_s</span>
  <span class='dstring node'>&quot;#&lt;#{self.class} #{@url}&gt;&quot;</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Wed Nov 16 18:10:46 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.3 (ruby-1.8.7).
</div>

  </body>
</html>